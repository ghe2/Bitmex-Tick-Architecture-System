define(["QuickBase","css!./css/app.css"],function(e){"use strict";a.getComponentDefinition=function(e){var n,i,o={id:19,componentName:"Breadcrumbs",componentDescription:"Breadcrumbs",appKey:"Breadcrumbs",css:"breadcrumbs",listViewThumb:e.websiteUrl+"Images/breadcrumbs.png",ghostViewThumb:null,buildViewThumb:null,appArgs:{websiteUrl:e.websiteUrl,quickStart:[{path:"Basics.Data"}],json:{version:"4.4.1",Basics:{Data:"",Enabled:!0,Icon:"fa-download",Label:t("Download"),Theme:"Dark"},Style:{advanced:""}},schema:{type:"object",title:"Properties",properties:{Basics:{type:"object",title:"Basics",options:{collapsed:!1},propertyOrder:200,properties:{Data:{type:"data",title:"Data Source",default:""},Icon:{type:"icon",title:"Icon",default:"fa-download"},Label:{type:"string",title:"Label",default:t("Download")},Enabled:{type:"boolean",title:"Enabled",default:!0},Theme:{type:"string",title:"Theme",options:{hidden:!0},enum:["Dark","Light"]},DashboardTheme:{options:{hidden:!0}}}},Style:{type:"object",title:"Style",options:{collapsed:!0},propertyOrder:210,properties:{advanced:{type:"css",title:"Advanced CSS",default:""}}}}}}};if(0<_.keys(e.settingsModel.attributes).length)for(i=a.upgrades.indexOf(_.find(a.upgrades,{version:e.settingsModel.get("version")}))+1;i<a.upgrades.length;i+=1)(n=a.upgrades[i]).fn(e.settingsModel,e),e.settingsModel.set("version",n.version);return o};var n=a;function a(){}function d(e){this.enabled=!1,this.api=e.api,e.el.className="Blob",this.$button=$("<button>").button({label:t("Download"),icons:{primary:"fa fa-download"}}).on("click",this.onLinkClick.bind(this)),e.el.appendChild(this.$button[0])}return n.upgrades=[{version:"4.4.1",fn:function(){}}],d.icoConvert=function(e){return""!==e?0<=e.indexOf("mi-")?"mi "+e:0<=e.indexOf("fa-")?"fa "+e:"fa fa-"+e:e},d.downloadFile=function(e,t,n){var i,o=document.createElement("a");window.Blob?(i=new Blob([n],{type:t}),window.navigator.msSaveOrOpenBlob?o.onclick=function(){window.navigator.msSaveOrOpenBlob(i,e)}:void 0!==o.download&&o.setAttribute("href",URL.createObjectURL(i))):o.setAttribute("href",encodeURI(t+","+n)),void 0!==o.download&&o.setAttribute("download",e),document.body.appendChild(o),o.click(),document.body.removeChild(o)},d.prototype.onSettingsChange=function(e){void 0!==e[d.PROP_ENABLED]&&(this.enabled=e[d.PROP_ENABLED]),void 0!==e[d.PROP_DATA]&&(this.data=e[d.PROP_DATA]),void 0!==e[d.PROP_LABEL]&&this.$button.button("option","label",e[d.PROP_LABEL]),void 0!==e[d.PROP_ICON]&&this.$button.button("option","icons",{primary:d.icoConvert(e[d.PROP_ICON])}),this.$button.button("option","disabled",!(this.enabled&&this.data))},d.prototype.onLinkClick=function(){var s=this;this.enabled&&this.data&&this.api.subscribe(this.data,function(e,t,n){var i,o,a;s.api.unsubscribe(s.data),_.every(["name","mimeType","data"],function(e){return _.has(t.cols,e)})&&(i=t.cols.name.getValue(0),o=t.cols.mimeType.getValue(0),a=t.cols.data.getValue(0),a=new Uint8Array(a.dataView.buffer,a.offset,a.length),d.downloadFile(i,o,a))},!0,void 0)},d.getComponentDefinition=n.getComponentDefinition,d.PROP_DATA="Basics.Data",d.PROP_ENABLED="Basics.Enabled",d.PROP_ICON="Basics.Icon",d.PROP_LABEL="Basics.Label",d});